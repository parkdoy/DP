AI 기반 게임 매크로 프로그램 구현 계획
이 문서는 게임 화면을 인식하고 캐릭터 간의 거리에 따라 자동으로 버프를 제공하는 매크로 프로그램의 전체적인 구현 계획을 담고 있습니다. 매크로 방지 프로그램에 걸리지 않기 위해 커널 수준의 키보드 입력을 사용하는 것이 핵심 목표입니다.
1단계: 화면 인식 및 객체 분류
AI가 게임 화면을 정확하게 인식하고, 내 캐릭터와 동료 캐릭터를 구분하여 분류하는 단계입니다. 단순히 이미지와 일치하는 부분을 찾는 템플릿 매칭 대신, 유연한 인식이 가능한 딥러닝 기술을 활용합니다.
기술: 객체 탐지 (Object Detection)
모델: 실시간 객체 탐지에 최적화된 YOLO (You Only Look Once) 모델을 사용합니다.
데이터 준비:
스크린샷 수집: 게임 화면을 다양한 상황(전투, 이동, 스킬 사용 등)에서 수백 장 이상 캡처합니다.
데이터 라벨링: my_character (내 캐릭터)와 ally_character (동료 캐릭터) 영역을 수집한 이미지에 직접 표시(바운딩 박스)합니다. 이 과정이 가장 많은 시간과 노력을 필요로 합니다.
학습 및 추론: 준비된 데이터를 바탕으로 YOLO 모델을 학습시키고, 프로그램 실행 시 실시간으로 게임 화면을 캡처하여 각 캐릭터의 위치 좌표를 받아옵니다.
2단계: 버프 기능 구현 (거리 계산)
화면 인식 단계에서 얻은 캐릭터들의 좌표를 사용하여 버프 제공 여부를 결정하는 단계입니다.
거리 계산: 두 캐릭터의 바운딩 박스 중심점 좌표를 이용하여 이들 사이의 거리를 계산합니다. 피타고라스의 정리(sqrt(x_2−x_1)2+(y_2−y_1)2)를 사용하여 픽셀 단위의 거리를 정확하게 계산할 수 있습니다.
버프 조건: 계산된 거리가 미리 설정된 임계값보다 작을 경우, 버프를 제공하는 기능을 실행합니다.
3단계: 커널 수준 키보드 입력
매크로 방지 프로그램 감지를 피하기 위한 가장 중요한 단계입니다. 일반적인 파이썬 라이브러리가 아닌, 운영체제(OS)의 API를 직접 호출하여 실제 하드웨어 입력처럼 동작하도록 구현합니다.
기술 스택: 파이썬과 C++ 연동
파이썬: AI 모델을 통한 화면 인식과 게임 로직을 담당합니다.
C++: 커널 수준의 키보드 입력을 처리하는 모듈을 구현합니다.
연동: 파이썬의 ctypes 또는 Pybind11 라이브러리를 사용해 C++로 만든 모듈을 파이썬에서 호출합니다.
운영체제별 구현:
Windows: WinAPI의 SendInput() 함수를 사용합니다. 이 함수는 운영체제에 직접 입력 이벤트를 전송하여 매크로 방지 프로그램을 우회하는 데 효과적입니다.
Linux: uinput 모듈을 사용해 가상 키보드 장치를 생성하고 이벤트를 전송합니다.
macOS: I/O Kit 또는 Core Graphics를 사용합니다.

전체 프로그램 구조
graph TD
    A[게임 화면 캡처] --> B(딥러닝 모델로 이미지 분석)
    B --> C{내 캐릭터 & 동료 캐릭터 좌표}
    C --> D[거리 계산]
    D --> E{버프 조건 만족? (거리 < 임계값)}
    E -- Yes --> F[C++ 버프 함수 호출]
    F --> G[C++ 커널 수준 키보드 입력]
    G --> H[게임]
    E -- No --> I[대기 및 반복]
    I --> A


